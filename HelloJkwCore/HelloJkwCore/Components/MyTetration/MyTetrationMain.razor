@page "/mytetration"
@inherits JkwPageBase
@using HelloJkwCore.Tetration

<MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OnClick">
    테트레이션 이미지 생성
</MudButton>

@if (!string.IsNullOrEmpty(base64Image))
{
    <img src="data:image/png;base64,@base64Image" style="max-height: 70vh;"/>
}


@code {
    private string? base64Image;
    private async Task OnClick()
    {
        var TetrationService = new TetrationService();
        TetrationService.OnTetrationResult += (sender, result) =>
        {
            base64Image = result.Base64Image;
            StateHasChanged();
        };
        var result = await TetrationService.CreateTetrationImageChunk(new TeRactangle(new TePoint(-5, -5.0 / 1920 * 1080), new TePoint(5, 5.0 / 1920 * 1080)), new TeSize(1920, 1080), new TeOptions(100, 1e10, 5));

        base64Image = result.Base64Image;

        StateHasChanged();
    }
}
