@page "/diary"
@page "/diary/{DiaryName}/{DateStr}"

@using Common
@using HelloJkwService.Diary

@if (IsAuthenticated && HasDiary)
{
    <h2>@Diary.Date.ToString("yyyy.MM.dd") <span class="smaller">@Diary.Date.GetWeekday(DateLanguage.KR, WeekdayFormat.D)</span></h2>

    @foreach (var diary in DiaryList.Where(x => x.Date == DiaryDate))
    {
        <pre>@diary.Text</pre>
    }

    @if (Diary.HasPrev(out var prevDate))
    {
        <button @onclick="@(_ => GotoDiary(DiaryInfo.DiaryName, prevDate))">
            이전
        </button>
    }

    @if (Diary.HasNext(out var nextDate))
    {
        <button @onclick="@(_ => GotoDiary(DiaryInfo.DiaryName, nextDate))">
            다음
        </button>
    }

    @if (IsMyDiary)
    {
        <button @onclick="@(_ => WriteDiary())">쓰기</button>
        <button @onclick="@(_ => EditDiary())">수정</button>
        <button @onclick="@(_ => ShowDiaryList())">목록</button>
        <button @onclick="@(_ => DiarySearch())">검색</button>
    }
}
else if (IsAuthenticated && !HasDiary)
{
    <span>일기장을 만드세요</span>
}
else
{
    <span>로그인하세요.</span>
}

